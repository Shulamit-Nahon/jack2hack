new_function_checker := proc() is
	function_checker := [
		funcs = []
	]

	proc function_checker@@def(func) is
		self.funcs[func] := true
	end

	proc function_checker@@call(func) is
		if self.funcs[func] <> true then
			self.funcs[func] := false
		fi
	end

	proc function_checker@@undefined_functions(_) is
		undefined_funcs := {}
		for func, defined in self.funcs do
			skip when self.funcs[func]
			insert func into undefined_funcs
		od
		return undefined_funcs
	end

	return function_checker
end